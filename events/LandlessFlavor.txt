namespace = landless

# Keep record of whether an army with ruler visited a city before.
country_event = {
	id = landless.1
	title = landless.1.title
	desc = landless.1.desc

	hidden = yes
	
	mean_time_to_happen = {
		days = 15
	}
	
	trigger = {
		is_landless = yes
		any_province = {
			num_of_units_in_province = {
				who = ROOT
				amount = 1
			}
			NOT = { has_province_flag = visited_by_adventurers@ROOT }
		}
	}
	
	immediate = {
		random_province = {
			limit = {
				num_of_units_in_province = {
					who = ROOT
					amount = 1
				}
			}
			set_province_flag = visited_by_adventurers@ROOT
		}
		
		# Add PROVINCE SPECIFIC events here.
		#
		
		random_list = {
			100 = { } # Increase this probability as more random event comes.
			# Add random events upon entering city here.
			1 = {
				ROOT = { country_event = { id = landless.1000 } }
			}
		}
	}
	
	option = {
		name = landless.1.opt1
		#log = "landless.1.opt1"
	}
}
###########################################
#             Random Flavors              #
###########################################
country_event = {
	id = landless.1000
	title = troublemakers_amongst_us.title
	desc = troublemakers_amongst_us.desc
	is_triggered_only = yes
	
	trigger = {
		is_landless = yes
		NOT = { stability = 1 }
		NOT = { has_ruler_modifier = harsh_discipliner }
		NOT = { has_country_modifier = crowd_entertained }
		NOT = { has_country_modifier = payment_cut }
	}
	
	# option = {
		# name = troublemakers_amongst_us.opt1 # Execute both troublemakers.
		
		# kill_units = {
			# who = ROOT
			# amount = 2
		# }
		
		# add_meritocracy = -5
		# add_prestige = 5
		# add_ruler_modifier = { 
			# name = harsh_discipliner
			# duration = -1  
			# desc = harsh_discipliner_desc
		# }
		# custom_tooltip = troublemakers_amongst_us.opt1.tt
	# }
	
	option = {
		name = troublemakers_amongst_us.opt2
		#log = "troublemakers_amongst_us.opt2" # Organize a fight between them.
		add_country_modifier = { 
			name = crowd_entertained
			duration = 365  
			desc = crowd_entertained_desc
		}
	}
	
	option = {
		name = troublemakers_amongst_us.opt3
		#log = "troublemakers_amongst_us.opt3" # Cut their two-months payment
		add_country_modifier = { 
			name = payment_cut
			duration = 60  
			desc = payment_cut_desc
		}
		random = {
			chance = 50
			add_country_modifier = { 
				name = high_discontent
				duration = 60  
				desc = high_discontent_desc
			}
		}
	}
}